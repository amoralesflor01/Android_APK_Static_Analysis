## Mob-SF Mass Static Analaysis

This repository contains a Python script for performing **static analysis** on Android `.apk` files using [MobSF (Mobile Security Framework)](https://mobsf.github.io/docs/#/). The script uploads each APK to MobSF, retrieves a full JSON report, and saves a CSV summary for easy review.

---

## üõ†Ô∏è Prerequisites

Before running the script, make sure you have the following installed and set up:

- [Docker](https://www.docker.com/products/docker-desktop/)
- MobSF Docker container (see [MobSF Docs](https://github.com/MobSF/Mobile-Security-Framework-MobSF))
- MobSF **REST API key** (retrieved from the container logs at startup)
- A folder containing `.apk` files to analyze

---

## üìÅ Setup Instructions

1. **Download the script** to your local machine.  
   Example path:  
   ```bash
   git clone git@github.com:amoralesflor01/Android_APK_Static_Analysis.git
   ```

2. **Prepare the APKs**:
   - Create a directory called `android_apks_folder` in the same folder as the script.
   - Place all your `.apk` files inside that folder.
   - Alternatively, modify the `APK_DIRECTORY` variable in the script to point to your custom `.apk` directory:
   ```python
   APK_DIRECTORY = 'your_custom_folder_name'
   ```

3. **Run the script**:
   - Launch the MobSF container:
   ```bash
   docker pull opensecurity/mobile-security-framework-mobsf:latest
   docker run -it --rm -p 8000:8000 opensecurity/mobile-security-framework-mobsf:latest
   ```
   - Wait for MobSF to fully boot.


4. **Configure the script**:
   - Replace the placeholder `APIKEY` with the **actual MobSF REST API key** that appears in the container logs:
   ```python
   APIKEY = 'your_actual_api_key_here'
   ```
   - This key is printed on MobSF startup and looks like:
   ```
   REST API Key: 45aa8707574eda4a657a496de79041476276622d9ea1b48a3b90b12c142b645a
   ```

   - Run the script:
   ```bash
   python mobsf_apk_script.py
   ```

---

## üìÇ Output

After execution, the results will be saved in the `analysis_results/` directory:

- Each `.json` file is a full MobSF static analysis report.
- The `results.csv` contains a summary of all scanned apps.
- App PDFs are in a directory called `analysis_results/pdf_reports`

---

## üìö MobSF Documentation

For more information about MobSF and its Docker usage, visit:  
üîó [https://mobsf.github.io/docs/#/](https://mobsf.github.io/docs/#/)


---

### üìë Additional Analysis (Jupyter Notebook)

This repo also includes a Jupyter Notebook (`permission_and_code_extraction_script.ipynb`) for **post-processing the MobSF results** after running `mobsf_apk_script.py`.

---

#### üîç What the Notebook Does

It takes the `results.csv` generated by the MobSF script and extracts:

##### ‚úÖ Dangerous Permissions  
- Parses the dangerous `permissions` column for each app.  

##### ‚úÖ Code Security Findings  
- Parses the high & warning severity categories from the `code_analysis` column. 

---

#### üìÅ Output Location

After running the notebook, results are saved in the `app_permissions_and_code_security/` directory

- The `permissions/permissions.csv` has the csv file with all dangerous permissions.
- The `code_security/code_security.csv` has all of the 'high' and 'warning' severity code categories.
